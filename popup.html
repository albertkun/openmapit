<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>OpenMapIt</title>
  <!-- Use local CSS to satisfy extension CSP -->
  <link rel="stylesheet" href="maplibre-gl.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; }
    body {
      font-family: Arial, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: #ffffff;
    }
    #header {
      background-color: #2c3e50;
      color: white;
      padding: 16px 20px;
      text-align: center;
    }
    #header h1 { font-size: 22px; margin-bottom: 6px; }
    #location-info { font-size: 13px; color: #ecf0f1; margin-top: 6px; word-break: break-word; }
    #map-container { flex: 1; min-height: 0; position: relative; background-color: #f0f0f0; }
    #map { width: 100%; height: 100%; }
    #no-location { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #7f8c8d; padding: 20px; text-align: center; }
    #no-location h2 { font-size: 18px; margin-bottom: 10px; }
    #no-location p { font-size: 14px; line-height: 1.5; }
    #input-section { padding: 12px 16px; background-color: #ecf0f1; border-top: 1px solid #bdc3c7; }
    .input-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; max-width: 1100px; margin: 0 auto; width: 100%; }
    #location-input { width: 100%; padding: 12px; border: 1px solid #bdc3c7; border-radius: 6px; font-size: 14px; }
    #search-btn { padding: 12px 16px; background-color: #3498db; color: white; border: none; border-radius: 6px; font-size: 15px; cursor: pointer; transition: background-color 0.3s; }
    #search-btn:hover { background-color: #2980b9; }
    #search-btn:disabled { background-color: #95a5a6; cursor: not-allowed; }
    .loading { color: #3498db; font-style: italic; }
    /* Custom marker and popup styles */
    .marker-dot { width: 16px; height: 16px; background: #ff6b6b; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,.3); }
    .maplibregl-popup-content { border-radius: 10px; padding: 12px 12px; box-shadow: 0 6px 20px rgba(0,0,0,.15); }
    .popup-title { font-weight: 600; color: #2c3e50; margin-bottom: 4px; }
    .popup-coords { font-size: 12px; color: #7f8c8d; }
    .popup-actions { margin-top: 10px; display: flex; gap: 8px; }
    .popup-btn { padding: 8px 12px; background: #2c3e50; color: #fff; border-radius: 8px; text-decoration: none; font-size: 13px; display: inline-flex; align-items: center; }
    /* Responsive */
    @media (min-width: 900px) { #header h1 { font-size: 24px; } #location-info { font-size: 14px; } }
    @media (max-width: 600px) {
      #input-section { padding: 10px 12px; }
      .input-row { grid-template-columns: 1fr; }
      #search-btn { width: 100%; }
    }
  </style>
</head>
<body>
  <div id="header">
    <h1>üó∫Ô∏è OpenMapIt</h1>
    <div id="location-info"></div>
  </div>
  <div id="map-container">
    <div id="map"></div>
    <div id="no-location" style="display: none;">
      <h2>No Location Selected</h2>
      <p>
        Right-click on an address or coordinates on any webpage and select 
        <strong>"Map this location"</strong> from the context menu.
        <br><br>
        Or enter an address or coordinates below to map it.
      </p>
    </div>
  </div>
  <div id="input-section">
    <div class="input-row" style="display: grid; grid-template-columns: 1fr auto; gap: 10px; max-width: 1100px; margin: 0 auto; width: 100%;">
      <input type="text" id="location-input" placeholder="Enter address or coordinates (e.g., 34.0522, -118.2437)">
      <button id="search-btn">Map Location</button>
    </div>
  </div>
  <!-- Use local JS to satisfy extension CSP -->
  <script src="maplibre-gl.js"></script>
  <script src="popup.js"></script>
</body>
</html>
